<?xml version="1.0"?>
<!--
################################################################################
# PostgreSQL Enabler Definition
#
# Common Variables (Change as Desired)
#
# PGSQL_DATA_DIR - path where the database files are located; 
#				NOTE: for persistence across engine hosts, it is recommended you
#               specify a network-mounted directory for this variable.
#               Changing this might also affect other variables (e.g, CAPTURE_INCLUDES)              
#
# PGSQL_PORT - port where this database listens for connections
#
# PGSQL_USER - the user account the enabler will run-as
#
# Power Variables (Change If You Know What You're Doing)
#
# CAPTURE_INCLUDES - common capture stuff, currently it includes everything
#                    under the standard data directory
#
# Internal Variables (Don't Change Unless Absolutely Needed)
#
# PGSQL_BASE_DIR - path where MySQL resides after installation - change
#                  CONTAINER_WORK_DIR instead
#
#
#
#
 ################################################################################
-->
<container class="com.datasynapse.fabric.container.ExecContainer">
    <property name="name" value="PostgreSQL Enabler"/>
    <property name="description" value="Enabler for PostgreSQL 9.2"/>
    <property name="version" value="1.0"/>
    <property name="distributionVersion" value="${distribution.version}"/>
    <property name="blocking" value="false"/>
    <property name="supportedDomainType" value="Default"/>
    
    <script class="com.datasynapse.fabric.common.script.Script">
        <property name="name" value="postgresql-enabler.py"/>
        <property name="language" value="jython"/>
        <property name="languageVersion" value="2.5"/>
    </script>
    
    <supportedFeature class="com.datasynapse.fabric.container.Feature">
        <property name="name" value="Capture Support"/>
        <property name="description" value="Support for capturing running Components"/>
        <property name="infoDescription" value="Specify if capture is enabled for this Component"/>
        <property name="infoClass" value="com.datasynapse.fabric.domain.featureinfo.CaptureFeatureInfo"/>
    </supportedFeature>
    
    <runtimecontexttemplate class="com.datasynapse.fabric.common.DefaultRuntimeContext">
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="DELETE_RUNTIME_DIR_ON_SHUTDOWN"/>
            <property name="value" value="false"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="PGSQL_BASE_DIR"/>
            <property name="value" value="${CONTAINER_WORK_DIR}/pgsql"/>
            <property name="description" value="Path where PostgreSQL resides after installation"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="PGSQL_DATA_DIR"/>
            <property name="value" value="${PGSQL_BASE_DIR}/data"/>
            <property name="description" value="Path where database files are located"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="PGSQL_USER"/>
            <property name="value" value="root"/>
            <property name="description" value="username"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="PGSQL_HOST_IP"/>
            <property name="value" value="${LISTEN_ADDRESS}"/>
            <property name="export" value="true"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="PGSQL_PORT"/>
            <property name="value" value="5432"/>
            <property name="export" value="true"/>
            <property name="autoIncrementType" value="Numeric"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="CAPTURE_INCLUDES"/>
            <property name="value" value="${PGSQL_DATA_DIR}/*"/>
        </variable>
        <variable class="com.datasynapse.fabric.common.RuntimeContextVariable">
            <property name="name" value="CAPTURE_EXCLUDES"/>
            <property name="value" value="${PGSQL_DATA_DIR}/*.pid"/>
        </variable>
    </runtimecontexttemplate>
    
</container>
